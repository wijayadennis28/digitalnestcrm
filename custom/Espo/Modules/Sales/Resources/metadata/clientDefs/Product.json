{
    "controller": "controllers/record",
    "views": {
        "list": "sales:views/product/list"
    },
    "viewSetupHandlers": {
        "record/detail": ["sales:handlers/product/setup-record-detail"],
        "record/edit": ["sales:handlers/product/setup-record-detail"]
    },
    "modalViews": {
        "select": "views/modals/select-records-with-categories"
    },
    "detailActionList": [
        {
            "name": "viewPrice",
            "label": "View Price",
            "handler": "sales:handlers/product/view-price-action",
            "data": {
                "handler": "sales:handlers/product/view-price-action"
            },
            "actionFunction": "process",
            "checkVisibilityFunction": "isVisible",
            "configCheck": "priceBooksEnabled"
        }
    ],
    "menu": {
        "list": {
            "dropdown": [
                {
                    "label": "Categories",
                    "link": "#ProductCategory",
                    "acl": "edit",
                    "aclScope": "ProductCategory"
                },
                {
                    "label": "Brands",
                    "link": "#ProductBrand",
                    "acl": "read",
                    "aclScope": "ProductBrand"
                },
                {
                    "labelTranslation": "Product.links.attributes",
                    "link": "#ProductAttribute",
                    "acl": "read",
                    "aclScope": "ProductAttribute"
                },
                false,
                {
                    "labelTranslation": "Global.scopeNamesPlural.PriceBook",
                    "link": "#PriceBook",
                    "acl": "read",
                    "aclScope": "PriceBook",
                    "configCheck": "priceBooksEnabled"
                },
                {
                    "labelTranslation": "Global.scopeNamesPlural.Supplier",
                    "link": "#Supplier",
                    "acl": "read",
                    "aclScope": "Supplier"
                },
                false,
                {
                    "labelTranslation": "Global.scopeNamesPlural.Warehouse",
                    "link": "#Warehouse",
                    "acl": "read",
                    "aclScope": "Warehouse",
                    "configCheck": "warehousesEnabled"
                },
                {
                    "labelTranslation": "Global.scopeNamesPlural.InventoryNumber",
                    "link": "#InventoryNumber",
                    "acl": "read",
                    "aclScope": "InventoryNumber",
                    "configCheck": "inventoryTransactionsEnabled"
                },
                {
                    "labelTranslation": "Global.scopeNamesPlural.InventoryAdjustment",
                    "link": "#InventoryAdjustment",
                    "acl": "read",
                    "aclScope": "InventoryAdjustment",
                    "configCheck": "inventoryTransactionsEnabled"
                },
                false,
                {
                    "labelTranslation": "Global.scopeNamesPlural.InventoryTransaction",
                    "link": "#InventoryTransaction",
                    "acl": "read",
                    "aclScope": "InventoryTransaction",
                    "configCheck": "inventoryTransactionsEnabled"
                }
            ]
        }
    },
    "massActionList": [
        "__APPEND__",
        "updatePrice"
    ],
    "checkAllResultMassActionList": [
        "__APPEND__",
        "updatePrice"
    ],
    "massActionDefs": {
        "updatePrice": {
            "handler": "sales:handlers/product-price/mass-update-price",
            "initFunction": "init",
            "actionFunction": "process",
            "acl": "edit",
            "aclScope": "Product"
        }
    },
    "filterList": [
        "available"
    ],
    "dynamicLogic": {
        "fields": {
            "pricingFactor": {
                "visible": {
                    "conditionGroup": [
                        {
                            "type": "in",
                            "attribute": "pricingType",
                            "value": [
                                "Discount from List",
                                "Markup over Cost",
                                "Profit Margin"
                            ]
                        }
                    ]
                }
            },
            "unitPrice": {
                "readOnly": {
                    "conditionGroup": [
                        {
                            "type": "notEquals",
                            "attribute": "pricingType",
                            "value": "Fixed"
                        }
                    ]
                }
            },
            "inventoryNumberType": {
                "visible": {
                    "conditionGroup": [
                        {
                            "type": "isTrue",
                            "attribute": "isInventory"
                        }
                    ]
                }
            },
            "expirationDays": {
                "visible": {
                    "conditionGroup": [
                        {
                            "type": "and",
                            "value": [
                                {
                                    "type": "isTrue",
                                    "attribute": "isInventory"
                                },
                                {
                                    "type": "isNotEmpty",
                                    "attribute": "inventoryNumberType"
                                }
                            ]
                        }
                    ]
                }
            },
            "removalStrategy": {
                "visible": {
                    "conditionGroup": [
                        {
                            "type": "and",
                            "value": [
                                {
                                    "type": "isTrue",
                                    "attribute": "isInventory"
                                },
                                {
                                    "type": "isNotEmpty",
                                    "attribute": "inventoryNumberType"
                                }
                            ]
                        }
                    ]
                }
            },
            "quantity": {
                "visible": {
                    "conditionGroup": [
                        {
                            "type": "isTrue",
                            "attribute": "isInventory"
                        }
                    ]
                }
            },
            "quantityReserved": {
                "visible": {
                    "conditionGroup": [
                        {
                            "type": "isTrue",
                            "attribute": "isInventory"
                        }
                    ]
                }
            },
            "quantityOnHand": {
                "visible": {
                    "conditionGroup": [
                        {
                            "type": "isTrue",
                            "attribute": "isInventory"
                        }
                    ]
                }
            },
            "quantitySoftReserved": {
                "visible": {
                    "conditionGroup": [
                        {
                            "type": "isTrue",
                            "attribute": "isInventory"
                        }
                    ]
                }
            },
            "quantityInTransit": {
                "visible": {
                    "conditionGroup": [
                        {
                            "type": "isTrue",
                            "attribute": "isInventory"
                        }
                    ]
                }
            },
            "quantityOnOrder": {
                "visible": {
                    "conditionGroup": [
                        {
                            "type": "isTrue",
                            "attribute": "isInventory"
                        }
                    ]
                }
            },
            "type": {
                "readOnly": {
                    "conditionGroup": [
                        {
                            "type": "isNotEmpty",
                            "attribute": "id"
                        }
                    ]
                }
            }
        },
        "panels": {
            "inventoryNumbers": {
                "visible": {
                    "conditionGroup": [
                        {
                            "type": "isNotEmpty",
                            "attribute": "inventoryNumberType"
                        }
                    ]
                }
            },
            "quantity": {
                "visible": {
                    "conditionGroup": [
                        {
                            "type": "isTrue",
                            "attribute": "isInventory"
                        }
                    ]
                }
            },
            "inventoryAdjustmentItems": {
                "visible": {
                    "conditionGroup": [
                        {
                            "type": "isTrue",
                            "attribute": "isInventory"
                        },
                        {
                            "type": "notIn",
                            "attribute": "type",
                            "value": ["Template"]
                        }
                    ]
                }
            }
        },
        "options": {
            "type": [
                {
                    "optionList": [
                        "Regular",
                        "Template"
                    ],
                    "conditionGroup": [
                        {
                            "type": "isEmpty",
                            "attribute": "id"
                        }
                    ]
                }
            ]
        }
    },
    "dynamicHandler": "sales:product-dynamic-handler",
    "bottomPanels": {
        "detail": [
            {
                "name": "warehousesQuantity",
                "label": "Warehouses",
                "view": "sales:views/product/record/panels/warehouses-quantity"
            },
            {
                "name": "orderItems",
                "label": "Orders",
                "view": "sales:views/product/record/panels/order-items",
                "recordListView": "sales:views/quote-item/record/list-union"
            }
        ],
        "detailSmall": [
            {
                "name": "warehousesQuantity",
                "label": "Warehouses",
                "view": "sales:views/product/record/panels/warehouses-quantity"
            }
        ]
    },
    "relationshipPanels": {
        "prices": {
            "layout": "listForProduct",
            "unlinkDisabled": true,
            "selectDisabled": true,
            "createHandler": "sales:handlers/product/add-price",
            "filterList": [
                "all",
                "active"
            ]
        },
        "supplierPrices": {
            "layout": "listForProduct",
            "unlinkDisabled": true,
            "selectDisabled": true,
            "filterList": [
                "all",
                "active"
            ]
        },
        "inventoryTransactions": {
            "createDisabled": true,
            "selectDisabled": true,
            "unlinkDisabled": true
        },
        "inventoryNumbers": {
            "selectDisabled": true,
            "unlinkDisabled": true,
            "filterList": [
                "all",
                "onHand"
            ],
            "layout": "listForProduct",
            "view": "sales:views/product/record/panels/inventory-numbers",
            "createHandler": "sales:handlers/product/create-inventory-number"
        },
        "variants": {
            "createDisabled": true,
            "selectDisabled": true,
            "unlinkDisabled": true,
            "layout": "listVariant",
            "view": "sales:views/product/record/panels/variants",
            "filterList": [
                "allVariants",
                "availableVariants"
            ],
            "orderBy": "variantOrder"
        },
        "inventoryAdjustmentItems": {
            "createDisabled": true,
            "selectDisabled": true,
            "unlinkDisabled": true,
            "removeDisabled": true,
            "primaryFilter": "completed",
            "layout": "listForProduct",
            "orderBy": "createdAt",
            "orderDirection": "desc"
        }
    },
    "iconClass": "fas fa-cube",
    "additionalLayouts": {
        "listForAdd": {
            "type": "listSmall"
        },
        "listForAddInventory": {
            "type": "listSmall"
        },
        "listForWarehouse": {
            "type": "listSmall"
        },
        "listVariant": {
            "type": "listSmall"
        }
    }
}
